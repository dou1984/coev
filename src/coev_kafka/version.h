#pragma once

#include <string>
#include <cstdint>

std::string version();

struct KafkaVersion
{
    uint version_[4] = {0};

    constexpr KafkaVersion(uint major, uint minor, uint veryMinor, uint patch) : version_{major, minor, veryMinor, patch}
    {
    }
    KafkaVersion() = default;
    ~KafkaVersion() = default;
    bool IsAtLeast(const KafkaVersion &other) const;
    std::string String() const;
    bool operator==(const KafkaVersion &other) const;
    bool operator!=(const KafkaVersion &other) const;
    bool operator>=(const KafkaVersion &other) const;
};

#define DEFINE_KAFKA_VERSION(name, a, b, c, d) \
    inline constexpr KafkaVersion name(a, b, c, d);
DEFINE_KAFKA_VERSION(V0_8_2_0, 0, 8, 2, 0)
DEFINE_KAFKA_VERSION(V0_8_2_1, 0, 8, 2, 1)
DEFINE_KAFKA_VERSION(V0_8_2_2, 0, 8, 2, 2)
DEFINE_KAFKA_VERSION(V0_9_0_0, 0, 9, 0, 0)
DEFINE_KAFKA_VERSION(V0_9_0_1, 0, 9, 0, 1)
DEFINE_KAFKA_VERSION(V0_10_0_0, 0, 10, 0, 0)
DEFINE_KAFKA_VERSION(V0_10_0_1, 0, 10, 0, 1)
DEFINE_KAFKA_VERSION(V0_10_1_0, 0, 10, 1, 0)
DEFINE_KAFKA_VERSION(V0_10_1_1, 0, 10, 1, 1)
DEFINE_KAFKA_VERSION(V0_10_2_0, 0, 10, 2, 0)
DEFINE_KAFKA_VERSION(V0_10_2_1, 0, 10, 2, 1)
DEFINE_KAFKA_VERSION(V0_10_2_2, 0, 10, 2, 2)
DEFINE_KAFKA_VERSION(V0_11_0_0, 0, 11, 0, 0)
DEFINE_KAFKA_VERSION(V0_11_0_1, 0, 11, 0, 1)
DEFINE_KAFKA_VERSION(V0_11_0_2, 0, 11, 0, 2)
DEFINE_KAFKA_VERSION(V1_0_0_0, 1, 0, 0, 0)
DEFINE_KAFKA_VERSION(V1_0_1_0, 1, 0, 1, 0)
DEFINE_KAFKA_VERSION(V1_0_2_0, 1, 0, 2, 0)
DEFINE_KAFKA_VERSION(V1_1_0_0, 1, 1, 0, 0)
DEFINE_KAFKA_VERSION(V1_1_1_0, 1, 1, 1, 0)
DEFINE_KAFKA_VERSION(V2_0_0_0, 2, 0, 0, 0)
DEFINE_KAFKA_VERSION(V2_0_1_0, 2, 0, 1, 0)
DEFINE_KAFKA_VERSION(V2_1_0_0, 2, 1, 0, 0)
DEFINE_KAFKA_VERSION(V2_1_1_0, 2, 1, 1, 0)
DEFINE_KAFKA_VERSION(V2_2_0_0, 2, 2, 0, 0)
DEFINE_KAFKA_VERSION(V2_2_1_0, 2, 2, 1, 0)
DEFINE_KAFKA_VERSION(V2_2_2_0, 2, 2, 2, 0)
DEFINE_KAFKA_VERSION(V2_3_0_0, 2, 3, 0, 0)
DEFINE_KAFKA_VERSION(V2_3_1_0, 2, 3, 1, 0)
DEFINE_KAFKA_VERSION(V2_4_0_0, 2, 4, 0, 0)
DEFINE_KAFKA_VERSION(V2_4_1_0, 2, 4, 1, 0)
DEFINE_KAFKA_VERSION(V2_5_0_0, 2, 5, 0, 0)
DEFINE_KAFKA_VERSION(V2_5_1_0, 2, 5, 1, 0)
DEFINE_KAFKA_VERSION(V2_6_0_0, 2, 6, 0, 0)
DEFINE_KAFKA_VERSION(V2_6_1_0, 2, 6, 1, 0)
DEFINE_KAFKA_VERSION(V2_6_2_0, 2, 6, 2, 0)
DEFINE_KAFKA_VERSION(V2_6_3_0, 2, 6, 3, 0)
DEFINE_KAFKA_VERSION(V2_7_0_0, 2, 7, 0, 0)
DEFINE_KAFKA_VERSION(V2_7_1_0, 2, 7, 1, 0)
DEFINE_KAFKA_VERSION(V2_7_2_0, 2, 7, 2, 0)
DEFINE_KAFKA_VERSION(V2_8_0_0, 2, 8, 0, 0)
DEFINE_KAFKA_VERSION(V2_8_1_0, 2, 8, 1, 0)
DEFINE_KAFKA_VERSION(V2_8_2_0, 2, 8, 2, 0)
DEFINE_KAFKA_VERSION(V3_0_0_0, 3, 0, 0, 0)
DEFINE_KAFKA_VERSION(V3_0_1_0, 3, 0, 1, 0)
DEFINE_KAFKA_VERSION(V3_0_2_0, 3, 0, 2, 0)
DEFINE_KAFKA_VERSION(V3_1_0_0, 3, 1, 0, 0)
DEFINE_KAFKA_VERSION(V3_1_1_0, 3, 1, 1, 0)
DEFINE_KAFKA_VERSION(V3_1_2_0, 3, 1, 2, 0)
DEFINE_KAFKA_VERSION(V3_2_0_0, 3, 2, 0, 0)
DEFINE_KAFKA_VERSION(V3_2_1_0, 3, 2, 1, 0)
DEFINE_KAFKA_VERSION(V3_2_2_0, 3, 2, 2, 0)
DEFINE_KAFKA_VERSION(V3_2_3_0, 3, 2, 3, 0)
DEFINE_KAFKA_VERSION(V3_3_0_0, 3, 3, 0, 0)
DEFINE_KAFKA_VERSION(V3_3_1_0, 3, 3, 1, 0)
DEFINE_KAFKA_VERSION(V3_3_2_0, 3, 3, 2, 0)
DEFINE_KAFKA_VERSION(V3_4_0_0, 3, 4, 0, 0)
DEFINE_KAFKA_VERSION(V3_4_1_0, 3, 4, 1, 0)
DEFINE_KAFKA_VERSION(V3_5_0_0, 3, 5, 0, 0)
DEFINE_KAFKA_VERSION(V3_5_1_0, 3, 5, 1, 0)
DEFINE_KAFKA_VERSION(V3_5_2_0, 3, 5, 2, 0)
DEFINE_KAFKA_VERSION(V3_6_0_0, 3, 6, 0, 0)
DEFINE_KAFKA_VERSION(V3_6_1_0, 3, 6, 1, 0)
DEFINE_KAFKA_VERSION(V3_6_2_0, 3, 6, 2, 0)
DEFINE_KAFKA_VERSION(V3_7_0_0, 3, 7, 0, 0)
DEFINE_KAFKA_VERSION(V3_7_1_0, 3, 7, 1, 0)
DEFINE_KAFKA_VERSION(V3_7_2_0, 3, 7, 2, 0)
DEFINE_KAFKA_VERSION(V3_8_0_0, 3, 8, 0, 0)
DEFINE_KAFKA_VERSION(V3_8_1_0, 3, 8, 1, 0)
DEFINE_KAFKA_VERSION(V3_9_0_0, 3, 9, 0, 0)
DEFINE_KAFKA_VERSION(V3_9_1_0, 3, 9, 1, 0)
DEFINE_KAFKA_VERSION(V4_0_0_0, 4, 0, 0, 0)
DEFINE_KAFKA_VERSION(V4_1_0_0, 4, 1, 0, 0)
DEFINE_KAFKA_VERSION(MinVersion, 0, 8, 2, 0);
DEFINE_KAFKA_VERSION(MaxVersion, 4, 1, 0, 0);
DEFINE_KAFKA_VERSION(DefaultVersion, 2, 1, 0, 0);
#undef DEFINE_KAFKA_VERSION

KafkaVersion ParseKafkaVersion(const std::string &s);
